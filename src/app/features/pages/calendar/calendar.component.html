<div class="calendar-page">
    <div class="row text-center calendar-header">
        <div class="col-md-6">
            <div class="d-flex">
                <div class="btn btn-outline-secondary mx-5" mwlCalendarToday [(viewDate)]="viewDate">Today</div>
                <div
                    class="btn btn-next-prev"
                    mwlCalendarPreviousView
                    [view]="view"
                    [(viewDate)]="viewDate"
                    title="Previous"
                    (viewDateChange)="closeOpenMonthViewDay()">
                    <i class="fa-solid fa-chevron-left"></i>
                </div>
                <div
                    class="btn btn-next-prev"
                    mwlCalendarNextView
                    [view]="view"
                    [(viewDate)]="viewDate"
                    title="Next"
                    (viewDateChange)="closeOpenMonthViewDay()">
                    <i class="fa-solid fa-chevron-right"></i>
                </div>
                <div class="col-md-4">
                    <h3>{{ viewDate | calendarDate: view + 'ViewTitle':'en' }}</h3>
                </div>
            </div>
        </div>
    </div>
    <div class="calendar-body">
        <mwl-calendar-month-view
            [viewDate]="viewDate"
            [events]="events"
            [refresh]="refresh"
            [activeDayIsOpen]="activeDayIsOpen"
            (eventTimesChanged)="eventTimesChanged($event)"
            [cellTemplate]="customCellTemplate">
        </mwl-calendar-month-view>
    </div>
    <ng-template #customCellTemplate let-day="day" let-locale="locale">
        <div class="cal-cell-top">
            <span *ngIf="day.badgeTotal > 3" class="cal-day-badge-more" [title]="'has ' + day.badgeTotal + ' events on this day'">
                {{ day.badgeTotal - 3 }} More
            </span>
            <div *ngIf="day.events.length > 0" class="cal-day-event-list">
                <span
                    class="cal-day-event"
                    *ngFor="let event of day.events | slice: 0:3"
                    (click)="console(day)"
                    [title]="event.title"
                    [ngStyle]="{
                        'background-color': event?.color?.secondary,
                        color: event?.color?.primary,
                        border: '1px solid ' + event?.color?.primary
                    }">
                    {{ formatHours(event.start) }} -
                    {{ event.title }}
                </span>
            </div>
            <span class="cal-day-number">{{ day.date | calendarDate: 'monthViewDayNumber':locale }}</span>
        </div>
        <div class="cell-totals">
            <span *ngFor="let group of day.eventGroups" class="badge badge-{{ group[0] }}">
                {{ group[1].length }}
            </span>
        </div>
    </ng-template>
</div>
